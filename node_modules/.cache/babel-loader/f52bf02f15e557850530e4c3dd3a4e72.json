{"ast":null,"code":"import _regeneratorRuntime from\"/home/sisagricola/Documents/Software/AdmTareas/mern/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sisagricola/Documents/Software/AdmTareas/mern/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sisagricola/Documents/Software/AdmTareas/mern/FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import proyectoContext from'./proyectoContext';import proyectoReducer from'./proyectoReducer';// import uuid from 'uuid/v4';\nimport clienteAxios from'../../config/axios';import{FORMULARIO_PROYECTO,OBTENER_PROYECTOS,AGREGAR_PROYECTO,VALIDAR_FORMULARIO,PROYECTO_ACTUAL,PROYECTO_ERROR,ELIMINAR_PROYECTO}from'../../types';// El archivo dentro de types al llamarse index.js no necesita llamarse types/index.js, así como está funciona\nvar ProyectoState=function ProyectoState(props){// const proyectos = [\n//     { id: 1, nombre: 'Tienda Virtual' },\n//     { id: 2, nombre: 'Intranet' },\n//     { id: 3, nombre: 'Diseño de sitio' },\n//     { id: 4, nombre: 'MERN' }\n// ]\nvar initialState={formulario:false,proyectos:[],errorformulario:false,proyecto:null,mensaje:null};var _useReducer=useReducer(proyectoReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var mostrarFormulario=function mostrarFormulario(){dispatch({type:FORMULARIO_PROYECTO});};var obtenerProyectos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get(\"api/proyectos\");case 3:resultado=_context.sent;dispatch({type:OBTENER_PROYECTOS,payload:resultado.data.proyectos});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alerta={msg:\"Hubo un error\",categoria:\"alerta-error\"};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerProyectos(){return _ref.apply(this,arguments);};}();var agregarProyecto=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(proyecto){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('api/proyectos',proyecto);case 3:resultado=_context2.sent;dispatch({type:AGREGAR_PROYECTO,payload:resultado.data});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);alerta={msg:\"Hubo un error\",categoria:\"alerta-error\"};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function agregarProyecto(_x){return _ref2.apply(this,arguments);};}();var mostrarError=function mostrarError(){dispatch({type:VALIDAR_FORMULARIO});};var proyectoActual=function proyectoActual(id){dispatch({type:PROYECTO_ACTUAL,payload:id});};var eliminarProyecto=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var alerta;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/proyectos/\".concat(id));case 3:dispatch({type:ELIMINAR_PROYECTO,payload:id});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alerta={msg:\"Hubo un error\",categoria:\"alerta-error\"};dispatch({type:PROYECTO_ERROR,payload:alerta});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarProyecto(_x2){return _ref3.apply(this,arguments);};}();// Es recomendable manejar los datos del state y luego las funciones en el value del context\nreturn/*#__PURE__*/React.createElement(proyectoContext.Provider,{value:{proyectos:state.proyectos,formulario:state.formulario,errorformulario:state.errorformulario,proyecto:state.proyecto,mensaje:state.mensaje,mostrarFormulario:mostrarFormulario,obtenerProyectos:obtenerProyectos,agregarProyecto:agregarProyecto,mostrarError:mostrarError,proyectoActual:proyectoActual,eliminarProyecto:eliminarProyecto}},props.children);};export default ProyectoState;","map":{"version":3,"sources":["/home/sisagricola/Documents/Software/AdmTareas/mern/FrontEnd/src/context/proyectos/proyectoState.js"],"names":["React","useReducer","proyectoContext","proyectoReducer","clienteAxios","FORMULARIO_PROYECTO","OBTENER_PROYECTOS","AGREGAR_PROYECTO","VALIDAR_FORMULARIO","PROYECTO_ACTUAL","PROYECTO_ERROR","ELIMINAR_PROYECTO","ProyectoState","props","initialState","formulario","proyectos","errorformulario","proyecto","mensaje","state","dispatch","mostrarFormulario","type","obtenerProyectos","get","resultado","payload","data","alerta","msg","categoria","agregarProyecto","post","mostrarError","proyectoActual","id","eliminarProyecto","delete","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport proyectoContext from './proyectoContext';\nimport proyectoReducer from './proyectoReducer';\n// import uuid from 'uuid/v4';\nimport clienteAxios from '../../config/axios';\n\nimport {\n    FORMULARIO_PROYECTO,\n    OBTENER_PROYECTOS,\n    AGREGAR_PROYECTO,\n    VALIDAR_FORMULARIO,\n    PROYECTO_ACTUAL,\n    PROYECTO_ERROR,\n    ELIMINAR_PROYECTO\n} from '../../types';\n\n// El archivo dentro de types al llamarse index.js no necesita llamarse types/index.js, así como está funciona\n\nconst ProyectoState = props => {\n\n    // const proyectos = [\n    //     { id: 1, nombre: 'Tienda Virtual' },\n    //     { id: 2, nombre: 'Intranet' },\n    //     { id: 3, nombre: 'Diseño de sitio' },\n    //     { id: 4, nombre: 'MERN' }\n    // ]\n\n    const initialState = {\n        formulario: false,\n        proyectos: [],\n        errorformulario: false,\n        proyecto: null,\n        mensaje:null\n    }\n\n    const [state, dispatch] = useReducer(proyectoReducer, initialState);\n\n    const mostrarFormulario = () => {\n        dispatch({\n            type: FORMULARIO_PROYECTO\n        })\n    }\n\n    const obtenerProyectos = async () => {\n\n        try {\n            \n            const resultado = await clienteAxios.get(`api/proyectos`);\n\n            dispatch({\n                type: OBTENER_PROYECTOS,\n                payload: resultado.data.proyectos\n            });\n\n\n        } catch (error) {\n           \n            const alerta = {\n                msg: `Hubo un error`,\n                categoria: `alerta-error`\n            };\n            \n            dispatch({\n                type:PROYECTO_ERROR,\n                payload:alerta\n            });\n        }\n    }\n\n    const agregarProyecto = async proyecto => {\n        // proyecto.id=uuid();\n\n        try {\n\n            const resultado = await clienteAxios.post('api/proyectos', proyecto);\n\n            dispatch({\n                type: AGREGAR_PROYECTO,\n                payload: resultado.data\n            })\n\n        } catch (error) {\n\n            const alerta = {\n                msg: `Hubo un error`,\n                categoria: `alerta-error`\n            };\n            \n            dispatch({\n                type:PROYECTO_ERROR,\n                payload:alerta\n            })\n        }\n\n    }\n\n    const mostrarError = () => {\n        dispatch({\n            type: VALIDAR_FORMULARIO\n        })\n    }\n\n    const proyectoActual = id => {\n        dispatch({\n            type: PROYECTO_ACTUAL,\n            payload: id\n        })\n    }\n\n    const eliminarProyecto = async id => {\n\n        try {\n\n            await clienteAxios.delete(`/api/proyectos/${id}`);\n            \n            dispatch({\n                type: ELIMINAR_PROYECTO,\n                payload: id\n            });\n\n        } catch (error) {\n\n            const alerta = {\n                msg: `Hubo un error`,\n                categoria: `alerta-error`\n            };\n            \n            dispatch({\n                type:PROYECTO_ERROR,\n                payload:alerta\n            })\n        }\n\n    }\n\n    // Es recomendable manejar los datos del state y luego las funciones en el value del context\n    return (\n        <proyectoContext.Provider\n            value={{\n                proyectos: state.proyectos,\n                formulario: state.formulario,\n                errorformulario: state.errorformulario,\n                proyecto: state.proyecto,\n                mensaje: state.mensaje,\n                mostrarFormulario,\n                obtenerProyectos,\n                agregarProyecto,\n                mostrarError,\n                proyectoActual,\n                eliminarProyecto\n            }}\n        >\n            {props.children}\n        </proyectoContext.Provider>\n    );\n};\n\n\nexport default ProyectoState;"]},"metadata":{},"sourceType":"module"}